<mat-card> 
    <mat-card-header><h1>Add Transactions</h1></mat-card-header>
    <mat-card-content>
        <form (submit)="addTransaction">
            <mat-form-field  style="width: 100%;">
                <mat-label>Choose a date</mat-label>
                <input matInput [matDatepicker]="picker" [(ngModel)] = "newTransaction.dateTime" name="dateTime">
                <mat-hint>MM/DD/YYYY</mat-hint>
                <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker></mat-datepicker>
            </mat-form-field>
            <mat-form-field  style="width: 100%;">
                <mat-label for="description">Description:</mat-label>
                <input matInput type="text" id="description" [(ngModel)]="newTransaction.description" name="description">
            </mat-form-field>
            <mat-form-field  style="width: 100%;">
                <mat-label for="amount">Amount:</mat-label>
                <input matInput type="number" step="0.01" id="amount" [(ngModel)]="newTransaction.amount" name="amount">
            </mat-form-field>
            
                <button type="button" color="primary" style="width: 100%; margin-bottom: 0.5em;" mat-flat-button (click)="fileInput.click()">Attachment (optional):</button>
                <input hidden  #fileInput type="file"  id="attachment" [(ngModel)]="newTransaction.attachment" name="attachment">

                <button mat-flat-button color="accent" style="width: 100%;" type="submit">{{ isNewTransaction ? "Add" : 'Update' }} Transaction</button>
        </form>
    </mat-card-content>

    <mat-divider style="margin-top: 1.5em;"></mat-divider>
    <mat-card-header><h1>All Transactions</h1></mat-card-header>
    <mat-card-content>
        <table mat-table [dataSource]="transactions" class="mat-elevation-z8">
            <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef> No. </th>
                <td mat-cell *matCellDef="let transaction"> {{ transaction.id }} </td>
            </ng-container>
            <ng-container matColumnDef="dateTime">
                <th mat-header-cell *matHeaderCellDef> Date Time </th>
                <td mat-cell *matCellDef="let transaction"> {{ (transaction.dateTime | date ) }} </td>
            </ng-container>
            <ng-container matColumnDef="description">
                <th mat-header-cell *matHeaderCellDef> Description </th>
                <td mat-cell *matCellDef="let transaction"> {{ transaction.description }} </td>
            </ng-container>
            <ng-container matColumnDef="amount">
                <th mat-header-cell *matHeaderCellDef> Amount </th>
                <td mat-cell *matCellDef="let transaction"> {{ transaction.amount | number:'1.2-2'  }} </td>
            </ng-container>
            <ng-container matColumnDef="attachment">
                <th mat-header-cell *matHeaderCellDef> Attachment </th>
                <td mat-cell *matCellDef="let transaction"> {{ transaction.attachment }} </td>
            </ng-container>
            <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef> Actions </th>
                <td mat-cell *matCellDef="let transaction"> 
                    <button mat-button color="primary" (click)="getTransactionByid(transaction.id)">Update</button> &nbsp;
                    <button mat-button color="warn" (click)="deleteTransaction(transaction.id)">Delete</button>
                </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="tableColumnHeaders"></tr>
            <tr mat-row *matRowDef="let row; columns: tableColumnHeaders;"></tr>
        </table>
    </mat-card-content>
</mat-card>
